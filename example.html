<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Polypad API Demo</title>
</head>
<body>
  <h1>Polypad API Demo</h1>
  <div id="polypad" style="width: 800px; height: 600px;">
    <p>Content inside the second sidebar tab!</p>
  </div>
  <script src="https://static.mathigon.org/api/polypad-v2.1.js"></script>
  <script>
    (async function() {
      const parent = document.getElementById('polypad');
      const polypad = await Polypad.create(parent, {
        apiKey: 'test',
        bindKeyboardEvents: true,
        sidebarTab: {title: 'Examples', icon: 'folder-shared'},
        imageUpload: () => 'test.jpg'
      });
      polypad.on('change', e => console.log('change', e));
      polypad.on('undo', () => console.log('undo'));
      polypad.on('redo', () => console.log('redo'));
      polypad.on('grid', e => console.log('grid', e));
      polypad.on('options', e => console.log('options', e));
      polypad.on('selection', e => console.log('selection', e));
      polypad.on('viewport', e => console.log('viewport', e));

      const b1 = polypad.addCustomButton('settings', '<svg width="24" height="24"></svg>');
      b1.addEventListener('click', () => polypad.setOptions({altColors: true}));

      const b2 = polypad.addCustomButton('toolbar', 'Lock');
      b2.addEventListener('click', () => {
        for (const tile of polypad.getSelection()) {
          polypad.update(tile, {locked: true});
        }
      });

      const b3 = polypad.addCustomButton('settings', '<span>A</span>');
      b3.addEventListener('click', () => polypad.add({name: 'polygon', options: 'square', x: 200, y: 200, rot: 45}));
    })();
  </script>
</body>
</html>
